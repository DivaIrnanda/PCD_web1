{% extends "base.html" %}

{% block title %}Panduan Penggunaan - Prediksi Segmentasi Banjir{% endblock %}

{% block content %}
<!-- Hero Section -->
<div class="hero-section">
    <div class="container text-center">
        <h1><i class="bi bi-book"></i> Panduan Penggunaan</h1>
        <p class="lead">Langkah-langkah menggunakan sistem prediksi segmentasi banjir</p>
    </div>
</div>

<!-- Main Content -->
<div class="container mb-5">
    <div class="row">
        <div class="col-lg-10 mx-auto">
            
            <!-- Langkah-langkah -->
            <div class="card">
                <div class="card-header">
                    <h4 class="mb-0"><i class="bi bi-list-ol"></i> Langkah-Langkah Penggunaan</h4>
                </div>
                <div class="card-body">
                    
                    <!-- Step 1 -->
                    <div class="border-start border-primary border-4 ps-3 mb-4">
                        <h5><span class="badge bg-primary">1</span> Registrasi dan Login</h5>
                        <p>Sebelum menggunakan sistem, Anda perlu membuat akun terlebih dahulu:</p>
                        <ul>
                            <li>Klik menu <strong>"Register"</strong> di navbar</li>
                            <li>Isi form dengan username, email, dan password</li>
                            <li>Setelah berhasil registrasi, login dengan kredensial yang telah dibuat</li>
                        </ul>
                        <div class="alert alert-info">
                            <i class="bi bi-info-circle"></i> <strong>Catatan:</strong> Username dan email harus unik. Password minimal 6 karakter untuk keamanan.
                        </div>
                    </div>

                    <!-- Step 2 -->
                    <div class="border-start border-primary border-4 ps-3 mb-4">
                        <h5><span class="badge bg-primary">2</span> Buka Halaman Prediksi</h5>
                        <p>Setelah login, klik menu <strong>"Prediksi Segmentasi"</strong> pada navbar untuk masuk ke halaman utama pemrosesan citra.</p>
                    </div>

                    <!-- Step 3 -->
                    <div class="border-start border-primary border-4 ps-3 mb-4">
                        <h5><span class="badge bg-primary">3</span> Upload Citra</h5>
                        <p>Terdapat dua cara untuk mengunggah citra:</p>
                        <ul>
                            <li><strong>Klik pada area upload:</strong> Klik tombol "Pilih File" atau area upload untuk membuka file browser</li>
                            <li><strong>Drag and drop:</strong> Seret file citra langsung ke area upload</li>
                        </ul>
                        <div class="alert alert-info">
                            <i class="bi bi-info-circle"></i> <strong>Format yang didukung:</strong> PNG, JPG, JPEG (Maksimal 16MB)
                        </div>
                    </div>

                    <!-- Step 4 -->
                    <div class="border-start border-primary border-4 ps-3 mb-4">
                        <h5><span class="badge bg-primary">4</span> Verifikasi File</h5>
                        <p>Setelah file dipilih, sistem akan menampilkan nama file yang telah dipilih dalam kotak hijau. Pastikan file yang dipilih sudah benar sebelum melanjutkan.</p>
                    </div>

                    <!-- Step 5 -->
                    <div class="border-start border-primary border-4 ps-3 mb-4">
                        <h5><span class="badge bg-primary">5</span> Mulai Prediksi</h5>
                        <p>Klik tombol <strong>"Mulai Prediksi"</strong> untuk memulai proses segmentasi. Sistem akan:</p>
                        <ul>
                            <li>Melakukan pra-pemrosesan citra (resize ke 256×256 dan normalisasi)</li>
                            <li>Menjalankan model U-Net untuk prediksi</li>
                            <li>Menghasilkan mask segmentasi dan overlay</li>
                            <li>Menyimpan hasil ke database secara otomatis</li>
                        </ul>
                        <div class="alert alert-warning">
                            <i class="bi bi-clock"></i> <strong>Waktu proses:</strong> Biasanya memakan waktu 1-3 detik tergantung ukuran citra dan kecepatan server
                        </div>
                    </div>

                    <!-- Step 6 -->
                    <div class="border-start border-primary border-4 ps-3 mb-4">
                        <h5><span class="badge bg-primary">6</span> Lihat Hasil Prediksi</h5>
                        <p>Setelah proses selesai, sistem akan menampilkan tiga jenis visualisasi:</p>
                        <div class="row mt-3">
                            <div class="col-md-4">
                                <div class="border rounded p-3 text-center">
                                    <i class="bi bi-image" style="font-size: 2rem; color: var(--primary-blue);"></i>
                                    <h6 class="mt-2">Citra Asli</h6>
                                    <p class="text-muted small mb-0">Citra input yang Anda unggah tanpa modifikasi</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="border rounded p-3 text-center">
                                    <i class="bi bi-square-half" style="font-size: 2rem; color: var(--primary-blue);"></i>
                                    <h6 class="mt-2">Mask Segmentasi</h6>
                                    <p class="text-muted small mb-0">Area putih = Banjir<br>Area hitam = Non-Banjir</p>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="border rounded p-3 text-center">
                                    <i class="bi bi-layers" style="font-size: 2rem; color: var(--primary-blue);"></i>
                                    <h6 class="mt-2">Overlay</h6>
                                    <p class="text-muted small mb-0">Area merah transparan menunjukkan prediksi banjir</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Step 7 -->
                    <div class="border-start border-primary border-4 ps-3 mb-4">
                        <h5><span class="badge bg-primary">7</span> Analisis Statistik</h5>
                        <p>Bagian atas hasil menampilkan statistik prediksi yang informatif:</p>
                        <ul>
                            <li><strong>Area Banjir:</strong> Persentase area yang terdeteksi sebagai banjir (0-100%)</li>
                            <li><strong>Piksel Banjir:</strong> Jumlah piksel yang diklasifikasikan sebagai area banjir</li>
                            <li><strong>Total Piksel:</strong> Total piksel dalam citra yang diproses (65,536 untuk citra 256×256)</li>
                        </ul>
                    </div>

                    <!-- Step 8 -->
                    <div class="border-start border-primary border-4 ps-3">
                        <h5><span class="badge bg-primary">8</span> Lihat Riwayat Prediksi</h5>
                        <p>Semua prediksi yang Anda lakukan akan otomatis tersimpan dan dapat diakses kapan saja:</p>
                        <ul>
                            <li>Klik menu <strong>"Riwayat"</strong> di navbar</li>
                            <li>Lihat semua prediksi Anda dalam bentuk kartu dengan thumbnail</li>
                            <li>Klik pada kartu untuk melihat detail lengkap prediksi</li>
                            <li>Gunakan tombol hapus untuk menghapus prediksi yang tidak diperlukan</li>
                        </ul>
                    </div>

                </div>
            </div>

            <!-- Tips -->
            <div class="card">
                <div class="card-header">
                    <h4 class="mb-0"><i class="bi bi-lightbulb"></i> Tips Penggunaan</h4>
                </div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-md-6 mb-3">
                            <div class="d-flex">
                                <div class="flex-shrink-0">
                                    <i class="bi bi-check2-circle text-success" style="font-size: 1.5rem;"></i>
                                </div>
                                <div class="flex-grow-1 ms-3">
                                    <h6>Kualitas Citra</h6>
                                    <p class="text-muted mb-0">Gunakan citra dengan resolusi yang baik dan pencahayaan yang memadai untuk hasil terbaik. Hindari gambar yang terlalu gelap atau blur.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="d-flex">
                                <div class="flex-shrink-0">
                                    <i class="bi bi-check2-circle text-success" style="font-size: 1.5rem;"></i>
                                </div>
                                <div class="flex-grow-1 ms-3">
                                    <h6>Area Fokus</h6>
                                    <p class="text-muted mb-0">Pastikan area banjir terlihat jelas dalam frame citra untuk hasil segmentasi yang optimal. Hindari gambar dengan terlalu banyak objek penghalang.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="d-flex">
                                <div class="flex-shrink-0">
                                    <i class="bi bi-check2-circle text-success" style="font-size: 1.5rem;"></i>
                                </div>
                                <div class="flex-grow-1 ms-3">
                                    <h6>Format File</h6>
                                    <p class="text-muted mb-0">Format PNG memberikan kualitas lebih baik daripada JPG yang mengalami kompresi. Gunakan PNG untuk hasil yang lebih presisi.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="d-flex">
                                <div class="flex-shrink-0">
                                    <i class="bi bi-check2-circle text-success" style="font-size: 1.5rem;"></i>
                                </div>
                                <div class="flex-grow-1 ms-3">
                                    <h6>Interpretasi Hasil</h6>
                                    <p class="text-muted mb-0">Perhatikan overlay merah untuk identifikasi visual area banjir yang lebih mudah. Bandingkan dengan mask untuk validasi area yang terdeteksi.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="d-flex">
                                <div class="flex-shrink-0">
                                    <i class="bi bi-check2-circle text-success" style="font-size: 1.5rem;"></i>
                                </div>
                                <div class="flex-grow-1 ms-3">
                                    <h6>Manajemen Riwayat</h6>
                                    <p class="text-muted mb-0">Gunakan fitur riwayat untuk membandingkan prediksi dari waktu ke waktu. Hapus prediksi lama yang tidak diperlukan untuk menghemat ruang penyimpanan.</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6 mb-3">
                            <div class="d-flex">
                                <div class="flex-shrink-0">
                                    <i class="bi bi-check2-circle text-success" style="font-size: 1.5rem;"></i>
                                </div>
                                <div class="flex-grow-1 ms-3">
                                    <h6>Keamanan Akun</h6>
                                    <p class="text-muted mb-0">Jangan bagikan password Anda kepada siapapun. Logout setelah selesai menggunakan sistem, terutama di komputer bersama.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- FAQ -->
            <div class="card">
                <div class="card-header">
                    <h4 class="mb-0"><i class="bi bi-question-circle"></i> Pertanyaan Umum (FAQ)</h4>
                </div>
                <div class="card-body">
                    <div class="accordion" id="faqAccordion">
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#faq1">
                                    Berapa ukuran file maksimal yang bisa diupload?
                                </button>
                            </h2>
                            <div id="faq1" class="accordion-collapse collapse show" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Ukuran file maksimal adalah <strong>16MB</strong>. Pastikan file Anda tidak melebihi batas tersebut. Jika file terlalu besar, Anda bisa kompres terlebih dahulu atau gunakan resolusi yang lebih rendah.
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq2">
                                    Berapa lama waktu yang dibutuhkan untuk prediksi?
                                </button>
                            </h2>
                            <div id="faq2" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Proses prediksi biasanya memakan waktu <strong>1-3 detik</strong>, tergantung pada ukuran citra dan beban server. Preprocessing memakan ~100ms, model inference ~500ms-1s, dan post-processing ~200ms.
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq3">
                                    Apa arti warna pada hasil segmentasi?
                                </button>
                            </h2>
                            <div id="faq3" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Pada <strong>mask segmentasi</strong>: area putih menunjukkan area banjir, area hitam menunjukkan non-banjir. Pada <strong>overlay</strong>: area merah transparan menunjukkan prediksi banjir yang ditumpangkan pada citra asli untuk memudahkan identifikasi visual.
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq4">
                                    Apakah data citra saya disimpan?
                                </button>
                            </h2>
                            <div id="faq4" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Ya, citra yang Anda upload beserta hasil prediksinya disimpan di server dan database. Data ini hanya bisa diakses oleh Anda dan tersimpan di riwayat prediksi. Anda bisa menghapus prediksi kapan saja jika tidak diperlukan lagi.
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq5">
                                    Apakah hasil prediksi bisa salah?
                                </button>
                            </h2>
                            <div id="faq5" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Model memiliki akurasi <strong>90.69%</strong> berdasarkan evaluasi, namun tidak ada model yang sempurna. Hasil prediksi sebaiknya digunakan sebagai <strong>alat bantu</strong> dan tetap memerlukan validasi dari expert atau observasi lapangan untuk keputusan kritis.
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq6">
                                    Bagaimana cara logout dari sistem?
                                </button>
                            </h2>
                            <div id="faq6" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Klik pada <strong>username Anda</strong> di pojok kanan atas navbar, lalu pilih <strong>"Logout"</strong> dari dropdown menu. Anda akan diarahkan kembali ke halaman login dan session Anda akan berakhir.
                                </div>
                            </div>
                        </div>
                        
                        <div class="accordion-item">
                            <h2 class="accordion-header">
                                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#faq7">
                                    Apa yang dimaksud dengan IoU, Dice Score, dan Pixel Accuracy?
                                </button>
                            </h2>
                            <div id="faq7" class="accordion-collapse collapse" data-bs-parent="#faqAccordion">
                                <div class="accordion-body">
                                    Ini adalah metrik evaluasi model:
                                    <ul class="mb-0 mt-2">
                                        <li><strong>IoU (Intersection over Union):</strong> Mengukur overlap antara prediksi dan ground truth (0.8652 = 86.52% overlap)</li>
                                        <li><strong>Dice Score:</strong> Mengukur keseimbangan presisi dan recall (0.9573 = sangat baik)</li>
                                        <li><strong>Pixel Accuracy:</strong> Persentase piksel yang benar (0.9069 = 90.69% akurat)</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- CTA -->
            <div class="text-center mt-4">
                <h4>Siap Mencoba?</h4>
                <p class="text-muted">Mulai prediksi segmentasi banjir sekarang!</p>
                <a href="/prediksi" class="btn btn-primary btn-lg">
                    <i class="bi bi-arrow-right-circle"></i> Coba Prediksi Sekarang
                </a>
            </div>

        </div>
    </div>
</div>
{% endblock %}